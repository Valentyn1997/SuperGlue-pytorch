data:
  batch_size:
    train: 4
    val: 32
  train_path: data/COCO2014/train2014/   # Path to the directory of training imgs
  val_path: data/COCO2014/val2014/   # Path to the directory of training imgs
  train_size: -1
  val_size: 1000
  resize: [640, 480]  # Resize the input image before running inference. If two numbers, resize to the exact dimensions, if one
                      # number, resize the max dimension, if -1, do not resize
  resize_float: True  # Resize the image after casting uint8 to float

eval:
  - pairs_list: assets/scannet_test_pairs_with_gt.txt
    name: scannet
    resize: [640, 480]
    resize_float: False
    max_length: -1
    shuffle: False
    nms_radius: 3
    keypoint_threshold: 0.005
    max_keypoints: 1024
    data_dir: data/ScanNet/test_subset
    results_dir: dump_scannet_test_results/

  - pairs_list: assets/yfcc_test_pairs_with_gt.txt
    name: YFCC
    resize: [1600]
    resize_float: True
    max_length: -1
    shuffle: False
    nms_radius: 4
    keypoint_threshold: 0.005
    max_keypoints: 2048
    data_dir: data/YFCC/data/
    results_dir: dump_yfcc_test_results/

optimizer:
  learning_rate: 0.0001  # Learning rate

exp:
  viz: True  #  Visualize the matches and dump the plots
  eval: True  # Perform the evaluation (requires ground truth pose and intrinsics)
  opencv_display: False  # Visualize via OpenCV before saving output images
  fast_viz: True  # Use faster image visualization based on OpenCV instead of Matplotlib
  viz_extension: png  # Visualization file extension. Use pdf for highest-quality.
  show_keypoints: True  # Plot the keypoints in addition to the matches
  epochs: 200  #  Number of epochs
  accumulate_grad_batches: 1  # Gradient accumulation
  mlflow_uri: http://localhost:5100
  logging: True
  checkpoint: True
  checkpoint_path: checkpoints
  gpus: -1
  val_check_interval: 0.1

model:
  superglue:
    weights:
    match_threshold: 0.1  # SuperGlue match threshold
    min_keypoints: 512
    sinkhorn_iterations: 100  # Number of Sinkhorn iterations performed by SuperGlue
    init_bin_score: 1.0
    trainable_bin_score: True
  superpoint:
    nms_radius: 4  # SuperPoint Non Maximum Suppression (NMS) radius (Must be positive)
    keypoint_threshold: 0.005  # SuperPoint keypoint detector confidence threshold
    max_keypoints: 512  # Maximum number of keypoints detected by Superpoint ('-1' keeps all keypoints)

# Hydra defaults
defaults:
  - hydra/job_logging: colorlog
  - hydra/hydra_logging: colorlog